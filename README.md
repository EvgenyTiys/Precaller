# Приложение для запоминания текстов

Веб-приложение для запоминания текстов презентаций с использованием метода дворца памяти и мнемотехники.

## Особенности

- **Регистрация и аутентификация пользователей**
- **Загрузка текстов** на русском, немецком и английском языках
- **Мастер (Wizard)** для пошаговой настройки запоминания:
  - Шаг 1: Выбор воображаемого маршрута
  - Шаг 2: Разбиение текста на фрагменты
  - Шаг 3: Создание ассоциаций со смайликами, изображениями или словами
- **Режим тренировки** с навигацией и возможностью скрытия элементов
- **Интеллектуальный поиск смайликов** по содержанию текста
- **Адаптивный дизайн** для всех устройств

## Технологии

- **Backend**: Node.js, Express.js
- **Database**: SQLite3
- **Frontend**: Vanilla JavaScript, CSS3, HTML5
- **Authentication**: JWT токены
- **Context Protocol**: MCP Context7

## Установка и запуск

### Предварительные требования

- Node.js (версия 14 или выше)
- npm

### Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd workspace
```

2. Установите зависимости:
```bash
npm install
```

3. Создайте файл окружения (опционально):
```bash
# .env
JWT_SECRET=your-secret-key-change-in-production
PORT=3000
```

### Запуск

#### Режим разработки (с автоперезагрузкой):
```bash
npm run dev
```

#### Продакшн режим:
```bash
npm start
```

Приложение будет доступно по адресу: http://localhost:3000

## Структура проекта

```
workspace/
├── app.js                 # Основной файл приложения
├── package.json          # Зависимости и скрипты
├── config/              # Конфигурация
│   └── database.js      # Настройки базы данных
├── models/              # Модели данных
│   ├── database.js      # Класс для работы с БД
│   └── emojiDatabase.js # База смайликов с переводами
├── routes/              # Маршруты API
│   ├── auth.js          # Аутентификация
│   ├── texts.js         # Работа с текстами
│   ├── wizard.js        # Мастер настройки
│   └── training.js      # Режим тренировки
├── middleware/          # Промежуточное ПО
│   ├── auth.js          # Проверка аутентификации
│   └── logger.js        # Логирование
├── views/               # HTML шаблоны
│   ├── index.ejs        # Главная страница
│   ├── wizard.ejs       # Страница мастера
│   ├── training.ejs     # Страница тренировки
│   └── error.ejs        # Страница ошибки
└── public/              # Статические файлы
    ├── css/             # Стили
    │   ├── style.css    # Основные стили
    │   ├── wizard.css   # Стили мастера
    │   └── training.css # Стили тренировки
    ├── js/              # JavaScript
    │   ├── app.js       # Основной JS файл
    │   ├── auth.js      # Аутентификация
    │   ├── main.js      # Главная страница
    │   ├── wizard.js    # Мастер
    │   └── training.js  # Тренировка
    └── images/          # Изображения
```

## Использование

### 1. Регистрация и вход

- Откройте приложение в браузере
- Зарегистрируйтесь или войдите в существующий аккаунт

### 2. Загрузка текста

- Нажмите "Загрузить новый текст"
- Введите название и содержание текста
- Выберите язык текста
- Нажмите "Загрузить и перейти к мастеру"

### 3. Мастер настройки

#### Шаг 1: Маршрут
- Опишите знакомый маршрут, который не пересекает сам себя
- Маршрут должен иметь достаточно остановок для всех фрагментов текста

#### Шаг 2: Фрагменты
- Разбейте текст на логические фрагменты
- Кликайте в конце каждого фрагмента для его создания
- Редактируйте или удаляйте фрагменты при необходимости

#### Шаг 3: Ассоциации
- Для каждого фрагмента выберите подходящий смайлик
- Или используйте собственное изображение/слово
- Смайлики автоматически подбираются по содержанию фрагмента

### 4. Тренировка

- Выберите готовый текст из списка
- Используйте навигацию для перехода между фрагментами
- Скрывайте текст или смайлики для усложнения тренировки
- Используйте клавиатурные сокращения:
  - ← / → - навигация
  - Пробел - следующий фрагмент
  - H - скрыть/показать текст
  - E - скрыть/показать смайлики
  - R - начать сначала

## API Endpoints

### Аутентификация
- `POST /api/auth/register` - Регистрация
- `POST /api/auth/login` - Вход

### Тексты
- `GET /api/texts/` - Получить тексты пользователя
- `GET /api/texts/:id` - Получить конкретный текст
- `POST /api/texts/upload` - Загрузить новый текст
- `POST /api/texts/:id/fragments` - Сохранить фрагменты

### Мастер
- `POST /api/wizard/route` - Сохранить маршрут
- `POST /api/wizard/emojis` - Получить смайлики для текста
- `POST /api/wizard/associate` - Сохранить ассоциацию
- `GET /api/wizard/all-emojis` - Получить все смайлики
- `GET /api/wizard/text/:id` - Получить данные для мастера

### Тренировка
- `GET /api/training/available` - Получить доступные тексты
- `GET /api/training/text/:id` - Получить текст для тренировки

## База данных

Приложение использует SQLite базу данных со следующими таблицами:

- `users` - Пользователи
- `texts` - Тексты пользователей
- `text_fragments` - Фрагменты текстов
- `user_routes` - Маршруты пользователей

База данных создается автоматически при первом запуске.

## Поддержка языков

Приложение поддерживает поиск смайликов для следующих языков:
- Русский (ru)
- Английский (en)  
- Немецкий (de)

## Лицензия

ISC

## Поддержка

Для вопросов и предложений создавайте issues в репозитории проекта.