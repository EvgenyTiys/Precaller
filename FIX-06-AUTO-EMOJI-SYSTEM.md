# –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–∞ —ç–º–æ–¥–∑–∏ (FIX-06)

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —É–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–¥–±–æ—Ä–∞ —ç–º–æ–¥–∑–∏ –¥–ª—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ —Ç–µ–∫—Å—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:
- ‚úÖ –Ø–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –ë–î (–Ω–µ –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ)
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤–∞—Ä–µ–π –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞
- ‚úÖ –û–Ω—Ç–æ–ª–æ–≥–∏–∏ WordNet –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- ‚úÖ –†—É—Å—Å–∫–æ–π –±–∞–∑—ã —ç–º–æ–¥–∑–∏ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (30 –º–∏–Ω TTL)
- ‚úÖ UI —Å –∫–Ω–æ–ø–∫–æ–π –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       –ö–õ–ò–ï–ù–¢                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  wizard.js                                                 ‚îÇ
‚îÇ    ‚îú‚îÄ handleAutoSuggestEmojis()                           ‚îÇ
‚îÇ    ‚îú‚îÄ displaySuggestedEmojisForFragment()                 ‚îÇ
‚îÇ    ‚îú‚îÄ showProgressModal() / updateProgressModal()          ‚îÇ
‚îÇ    ‚îî‚îÄ hideProgressModal()                                  ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  EmojiSuggestionCache.js                                   ‚îÇ
‚îÇ    ‚îú‚îÄ get(text, language)                                 ‚îÇ
‚îÇ    ‚îú‚îÄ set(text, language, emojis)                         ‚îÇ
‚îÇ    ‚îú‚îÄ cleanup() [–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω]   ‚îÇ
‚îÇ    ‚îî‚îÄ TTL = 30 –º–∏–Ω—É—Ç                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚¨á HTTP POST
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       –°–ï–†–í–ï–†                               ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  routes/wizard.js                                          ‚îÇ
‚îÇ    ‚îî‚îÄ POST /api/wizard/emojis/auto-suggest               ‚îÇ
‚îÇ         ‚îú‚îÄ –ü–æ–ª—É—á–∞–µ—Ç textId –∏–∑ –∑–∞–ø—Ä–æ—Å–∞                     ‚îÇ
‚îÇ         ‚îú‚îÄ –ó–∞–≥—Ä—É–∂–∞–µ—Ç —è–∑—ã–∫ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –ë–î                    ‚îÇ
‚îÇ         ‚îî‚îÄ –í—ã–∑—ã–≤–∞–µ—Ç enhancedTranslationService            ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ  models/enhancedTranslationService.js                      ‚îÇ
‚îÇ    ‚îî‚îÄ findEmojisForFragment(text, language, maxEmojis)   ‚îÇ
‚îÇ         ‚îú‚îÄ extractKeywords() [—Å—Ç–æ–ø-—Å–ª–æ–≤–∞, –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è]  ‚îÇ
‚îÇ         ‚îú‚îÄ translateToEnglish() [—Å–ª–æ–≤–∞—Ä–∏]                 ‚îÇ
‚îÇ         ‚îú‚îÄ expandWithOntology() [WordNet]                 ‚îÇ
‚îÇ         ‚îî‚îÄ searchEmojisMultiSource() [2 –∏—Å—Ç–æ—á–Ω–∏–∫–∞]        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å

#### 1. **models/enhancedTranslationService.js**
–ì–ª–∞–≤–Ω—ã–π –º–æ–¥—É–ª—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞:
- `findEmojisForFragment()` - –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
- `extractKeywords()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ª–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è)
- `translateToEnglish()` - –ø–µ—Ä–µ–≤–æ–¥ —á–µ—Ä–µ–∑ —Å–ª–æ–≤–∞—Ä–∏
- `expandWithOntology()` - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WordNet
- `searchEmojisMultiSource()` - –ø–æ–∏—Å–∫ –≤ 2 –±–∞–∑–∞—Ö —ç–º–æ–¥–∑–∏

#### 2. **models/ontologyService.js**
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WordNet:
- `getSynonyms()` - —Å–∏–Ω–æ–Ω–∏–º—ã
- `getHyponyms()` - –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
- `getHypernyms()` - –±–æ–ª–µ–µ –æ–±—â–∏–µ —Ç–µ—Ä–º–∏–Ω—ã
- `getRelatedWords()` - –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–µ–π —Ä–µ—á–∏ (noun/verb/adjective)

#### 3. **models/dictionaries/germanEnglishDict.js**
–ù–µ–º–µ—Ü–∫–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å:
- –ë–∞–∑–æ–≤—ã–π —Å–ª–æ–≤–∞—Ä—å ~150 —Å–ª–æ–≤
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—ã —Å–ª–æ–≤
- –≠–≤—Ä–∏—Å—Ç–∏–∫–∏ –¥–ª—è —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤ (-isch ‚Üí -ish, –∏ —Ç.–¥.)
- –°–∏–Ω–æ–Ω–∏–º—ã –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —Å–ª–æ–≤

#### 4. **models/dictionaries/russianEnglishDict.js**
–†—É—Å—Å–∫–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å:
- –û–±—Ä–∞—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å –∏–∑ emojiDatabase
- –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å ~100 —Å–ª–æ–≤
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ä—É—Å—Å–∫–∏—Ö –æ–∫–æ–Ω—á–∞–Ω–∏–π

#### 5. **models/stopwords/\*.js**
–°—Ç–æ–ø-—Å–ª–æ–≤–∞ –¥–ª—è de/en/ru:
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `stopwords`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ —è–∑—ã–∫—É

#### 6. **routes/wizard.js**
–ù–æ–≤—ã–π endpoint:
- `POST /api/wizard/emojis/auto-suggest`
- –ü–æ–ª—É—á–∞–µ—Ç —è–∑—ã–∫ –∏–∑ –ë–î –ø–æ textId
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —ç–º–æ–¥–∑–∏

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å

#### 7. **public/js/EmojiSuggestionCache.js**
–ö—ç—à –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π:
- TTL = 30 –º–∏–Ω—É—Ç
- –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
- –ö–ª—é—á: `language:text`
- –ú–µ—Ç–æ–¥—ã: `get()`, `set()`, `clear()`, `cleanup()`

#### 8. **public/js/wizard.js (–æ–±–Ω–æ–≤–ª—ë–Ω)**
–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `handleAutoSuggestEmojis()` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏
- `displaySuggestedEmojisForFragment()` - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- `showProgressModal()` - –ø–æ–∫–∞–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- `updateProgressModal()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- `hideProgressModal()` - —Å–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞

#### 9. **views/wizard.ejs (–æ–±–Ω–æ–≤–ª—ë–Ω)**
–ù–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã UI:
- –ö–Ω–æ–ø–∫–∞ "–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä —ç–º–æ–¥–∑–∏" —Å –∏–∫–æ–Ω–∫–æ–π
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã –ø—Ä–æ—Ü–µ—Å—Å–∞

#### 10. **public/css/wizard.css (–æ–±–Ω–æ–≤–ª—ë–Ω)**
–°—Ç–∏–ª–∏ –¥–ª—è:
- –ú–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–∞
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
- –ö–Ω–æ–ø–∫–∏ –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–∞ —Å hover-—ç—Ñ—Ñ–µ–∫—Ç–æ–º

---

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

### –®–∞–≥ 1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
```javascript
"Ich gehe mit meinen Freunden ins Kino"
  ‚Üì –£–¥–∞–ª–µ–Ω–∏–µ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏
  ‚Üì –†–∞–∑–±–∏–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–≤–∞
  ‚Üì –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (length >= 3)
  ‚Üì –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–æ–ø-—Å–ª–æ–≤ (ich, mit, meinen, ins)
["gehe", "freunden", "kino"]
  ‚Üì –õ–µ–º–º–∞—Ç–∏–∑–∞—Ü–∏—è (–¥–ª—è –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ)
  ‚Üì –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —á–∞—Å—Ç–∏ —Ä–µ—á–∏
["gehe", "freunden", "kino"]
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π
```javascript
"freunden" 
  ‚Üì –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (freunden ‚Üí freund)
  ‚Üì –°–ª–æ–≤–∞—Ä—å germanEnglishDict
["friend"]
  ‚Üì –°–∏–Ω–æ–Ω–∏–º—ã
["friend", "buddy", "companion"]
```

### –®–∞–≥ 3: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –æ–Ω—Ç–æ–ª–æ–≥–∏—é
```javascript
"friend"
  ‚Üì WordNet lookup
  ‚îú‚îÄ –°–∏–Ω–æ–Ω–∏–º—ã: ["buddy", "companion", "pal"]
  ‚îú‚îÄ –ì–∏–ø–æ–Ω–∏–º—ã: ["best friend", "roommate"]
  ‚îî‚îÄ –ì–∏–ø–µ—Ä–æ–Ω–∏–º—ã: ["person", "human"]
–†–µ–∑—É–ª—å—Ç–∞—Ç: ["friend", "buddy", "companion", "pal", "person"]
```

### –®–∞–≥ 4: –ü–æ–∏—Å–∫ —ç–º–æ–¥–∑–∏
```javascript
["friend", "buddy", "companion", ...]
  ‚Üì –ò—Å—Ç–æ—á–Ω–∏–∫ 1: Emoji Mart (–∞–Ω–≥–ª–∏–π—Å–∫–∏–µ keywords)
  ‚îú‚îÄ "friend" ‚Üí üßë‚Äçü§ù‚Äçüßë üë´ ü§ù
  ‚Üì –ò—Å—Ç–æ—á–Ω–∏–∫ 2: –†—É—Å—Å–∫–∞—è –ë–î (—á–µ—Ä–µ–∑ –ø–µ—Ä–µ–≤–æ–¥—ã)
  ‚îú‚îÄ "friend" ‚Üí ru:"–¥—Ä—É–≥" ‚Üí en:"friend" ‚Üí ‚úì üë¨
  
–ò—Ç–æ–≥–æ: üßë‚Äçü§ù‚Äçüßë üë´ ü§ù üë¨ (–º–∞–∫—Å–∏–º—É–º 10)
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–∞

```javascript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä —ç–º–æ–¥–∑–∏"
// –í wizard.js –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –∏–∑ fragmentManager
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
3. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞:
   a. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—ç—à
   b. –ï—Å–ª–∏ –Ω–µ—Ç –≤ –∫—ç—à–µ - –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   c. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫—ç—à
   d. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ–¥ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–º
   e. –û–±–Ω–æ–≤–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
4. –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
5. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
```

### 2. –û—Ç–º–µ–Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞–∂–∞—Ç—å "–û—Ç–º–µ–Ω–∞" –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ.
–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `autoSuggestCancelled` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ `true`, –∏ —Ü–∏–∫–ª –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è.

### 3. –í—ã–±–æ—Ä —ç–º–æ–¥–∑–∏

–ü–æ—Å–ª–µ –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–∞ –ø–æ–¥ –∫–∞–∂–¥—ã–º —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–º –ø–æ—è–≤–ª—è—é—Ç—Å—è –∫–Ω–æ–ø–∫–∏ —Å —ç–º–æ–¥–∑–∏.
–ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ ‚Üí –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ `fragmentManager.updateAssociation()`.

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 1 —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞** | 0.5-1 —Å–µ–∫ |
| **–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ 20 —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤** | 10-20 —Å–µ–∫ |
| **–†–∞–∑–º–µ—Ä –∫—ç—à–∞** | ~100 –∑–∞–ø–∏—Å–µ–π = 50 KB |
| **TTL –∫—ç—à–∞** | 30 –º–∏–Ω—É—Ç |
| **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤** | –¥–æ 80% (–ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–∫–∞—Ö) |

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–¥–µ

```javascript
// enhancedTranslationService.js
const maxEmojis = 10;              // –ú–∞–∫—Å–∏–º—É–º —ç–º–æ–¥–∑–∏ –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç
const minWordLength = 3;           // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–ª–æ–≤–∞
const maxKeywords = 10;            // –ú–∞–∫—Å–∏–º—É–º –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

// EmojiSuggestionCache.js
this.ttl = 30 * 60 * 1000;        // 30 –º–∏–Ω—É—Ç TTL
cleanupInterval = 10 * 60 * 1000;  // –û—á–∏—Å—Ç–∫–∞ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω

// ontologyService.js
maxSynonyms = 5;                   // –°–∏–Ω–æ–Ω–∏–º–æ–≤ –Ω–∞ —Å–ª–æ–≤–æ
maxHyponyms = 3;                   // –ì–∏–ø–æ–Ω–∏–º–æ–≤ –Ω–∞ —Å–ª–æ–≤–æ
maxHypernyms = 2;                  // –ì–∏–ø–µ—Ä–æ–Ω–∏–º–æ–≤ –Ω–∞ —Å–ª–æ–≤–æ
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –º–∞—Å—Ç–µ—Ä —Å —Ç–µ–∫—Å—Ç–æ–º –Ω–∞ –Ω–µ–º–µ—Ü–∫–æ–º —è–∑—ã–∫–µ
2. –†–∞–∑–±–µ–π—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∞ 3-5 —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤
3. –ù–∞–∂–º–∏—Ç–µ "–ê–≤—Ç–æ–ø–æ–¥–±–æ—Ä —ç–º–æ–¥–∑–∏"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ–¥ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏
6. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å (–¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫—ç—à)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
window.emojiSuggestionCache.getStats()
// –í–µ—Ä–Ω—ë—Ç: { total: 5, valid: 5, expired: 0, ttl: 1800000 }
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```javascript
// –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
// –ü—Ä–∏ –∞–≤—Ç–æ–ø–æ–¥–±–æ—Ä–µ –ø–æ—è–≤—è—Ç—Å—è –ª–æ–≥–∏:
[AUTO-EMOJI] Fragment: "..."
[AUTO-EMOJI] Keywords: [...]
[AUTO-EMOJI] English words: [...]
[AUTO-EMOJI] Found 7 emojis
[CACHE] Stored for "..." (de), 7 emojis
```

---

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π —ç–º–æ–¥–∑–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —è–∑—ã–∫ —Ç–µ–∫—Å—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ –ë–î
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `wordpos` –∏ `stopwords` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

**–†–µ—à–µ–Ω–∏–µ**:
1. –£–º–µ–Ω—å—à–∏—Ç–µ `maxEmojis` –≤ `enhancedTranslationService.js`
2. –£–º–µ–Ω—å—à–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –≤ `ontologyService.js`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –∫—ç—à–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–µ —ç–º–æ–¥–∑–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. –†–∞—Å—à–∏—Ä—å—Ç–µ —Å–ª–æ–≤–∞—Ä—å –≤ `models/dictionaryData/germanEnglish.js`
2. –î–æ–±–∞–≤—å—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏–Ω–æ–Ω–∏–º—ã –≤ `germanEnglishDict.js`
3. –£–ª—É—á—à–∏—Ç–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Å—Ç–æ–ø-—Å–ª–æ–≤

---

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞—Ä–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤ (—Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π, –∏—Å–ø–∞–Ω—Å–∫–∏–π)
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å –Ω–µ–º–µ—Ü–∫–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å –¥–æ 5000+ —Å–ª–æ–≤
- [ ] –î–æ–±–∞–≤–∏—Ç—å machine learning –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —ç–º–æ–¥–∑–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±–æ—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å WordNet –∑–∞–ø—Ä–æ—Å—ã (batch processing)
- [ ] –î–æ–±–∞–≤–∏—Ç—å fallback —á–µ—Ä–µ–∑ Google Translate API

---

## –õ–∏—Ü–µ–Ω–∑–∏–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫

| –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ | –í–µ—Ä—Å–∏—è | –õ–∏—Ü–µ–Ω–∑–∏—è |
|------------|--------|----------|
| wordpos | 2.1.0 | MIT |
| natural | 8.1.0 | MIT |
| stopwords | latest | MIT |
| wink-lemmatizer | latest | MIT |
| wordnet-db | 3.1.14 | MIT |

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 23.11.2025  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é


